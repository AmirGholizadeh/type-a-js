!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.d=function(e,n,i){!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"===n(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./src/ts/TypeJS.ts")}({"./src/ts/TypeJS.ts":
/*!**************************!*\
    !*** ./src/ts/TypeJS.ts ***!
    \**************************/
/*! no static exports found */
function(e,t,n){"use strict";t.__esModule=!0;var i=n(
/*! ./classes/UIController */
"./src/ts/classes/UIController.ts"),o=n(
/*! ./functions/random */
"./src/ts/functions/random.ts"),r=function(){function e(e,t){this.startPermission=!0,this.addPermissionF=!1,this.deletePermission=!1,this.addPermissionIn=!1,this.config=t,this.parentId=e,this.addTextArr=this.config.add&&this.config.add.text.split(""),this.config.init.delay=this.config.init.delay?this.config.init.delay:1,this.config.init.delayBetween=this.config.init.delayBetween?this.config.init.delayBetween:50,this.config.cursorSpeed=this.config.cursorSpeed?this.config.cursorSpeed:50,this.config.clearDelay=this.config.clearDelay?this.config.clearDelay:1,this.config.delete&&(this.config.delete.delay=this.config.delete.delay?this.config.delete.delay:this.config.init.delay,this.config.delete.delayBetween=this.config.delete.delayBetween?this.config.delete.delayBetween:this.config.init.delayBetween),this.config.add&&(this.config.add.delay=this.config.add.delay?this.config.add.delay:this.config.init.delay,this.config.add.delayBetween=this.config.add.delayBetween?this.config.add.delayBetween:this.config.init.delayBetween),this.uiConfig={parentId:this.parentId,cursorId:""+o.default(0,9999999999999),containerId:""+o.default(0,9999999999999),textContainerId:""+o.default(0,9999999999999)},this.ui=new i.default(this.uiConfig)}return e.prototype.init=function(){this.typeIt()},e.prototype.handle=function(){var e=this;this.ui.createContainer(),this.ui.createCursor(this.config.cursorSpeed),this.initTextArr=this.config.init.text.split(""),window.setTimeout((function(){e.ui.createContainer(),e.ui.createCursor(e.config.cursorSpeed),e.initTextArr.forEach((function(t,n){window.setTimeout((function(){e.ui.addText(t),n===e.config.init.text.length-1&&(e.config.delete?window.setTimeout((function(){for(var t=function(t){window.setTimeout((function(){e.ui.deleteText(),t===e.config.delete.count-1&&e.config.add&&(e.addPermissionF=!0)}),t*e.config.delete.delayBetween)},n=0;n<e.config.delete.count;n++)t(n)}),e.config.delete.delay):e.config.add&&(e.addPermissionF=!0),e.config.add&&window.setInterval((function(){e.addPermissionF&&(e.addPermissionF=!1,window.setTimeout((function(){e.addTextArr.forEach((function(t,n){window.setTimeout((function(){e.ui.addText(t)}),n*e.config.add.delayBetween)}))}),e.config.add.delay))}),0))}),n*e.config.init.delayBetween)}))}),this.config.init.delay)},e.prototype.handleInfinite=function(){var e=this;window.setInterval((function(){e.startPermission&&(e.initTextArr=e.config.init.text.split(""),e.startPermission=!1,e.ui.createContainer(),e.ui.createCursor(e.config.cursorSpeed),window.setTimeout((function(){e.initTextArr.forEach((function(t,n){window.setTimeout((function(){if(e.ui.addText(t),e.initTextArr.length-1===n){e.config.delete?window.setTimeout((function(){for(var t=function(t){window.setTimeout((function(){if(e.ui.deleteText(),t===e.config.delete.count-1&&e.config.add){if(!e.config.infinite.deleteInfinite){var n=e.config.init.text.split("");n.splice(n.length-e.config.delete.count,n.length),e.config.init.text=n.toString().replace(/,/g,""),e.initTextArr=e.config.init.text.split(""),e.config.delete=null}e.addPermissionIn=!0}}),e.config.delete.delayBetween*t)},n=0;n<e.config.delete.count;n++)t(n)}),e.config.delete.delay):e.config.add?(e.deletePermission=!1,e.addPermissionIn=!0):e.deletePermission=!0,e.config.add?window.setInterval((function(){!0===e.addPermissionIn&&(e.addPermissionIn=!1,window.setTimeout((function(){e.addTextArr.forEach((function(t,n){window.setTimeout((function(){e.ui.addText(t),e.addTextArr.length-1===n&&(!e.config.infinite.addInfinite&&(e.config.init.text=""+e.config.init.text+e.config.add.text,e.initTextArr=e.config.init.text.split(""),e.config.add=null),e.deletePermission=!0)}),n*e.config.add.delayBetween)}))}),e.config.add.delay))}),0):e.deletePermission=!0;var i=window.setInterval((function(){e.deletePermission&&(e.deletePermission=!1,window.setTimeout((function(){e.ui.clear(),e.startPermission=!0,window.clearInterval(i)}),e.config.clearDelay))}),0)}}),n*e.config.init.delayBetween)}))}),e.config.init.delay))}),0)},e.prototype.typeIt=function(){this.config.infinite?this.handleInfinite():this.handle()},e}();t.default=r},"./src/ts/classes/UIController.ts":
/*!****************************************!*\
    !*** ./src/ts/classes/UIController.ts ***!
    \****************************************/
/*! no static exports found */
function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e){this.config=e}return e.prototype.createCursor=function(e){var t=document.createElement("span");t.id=this.config.cursorId,t.textContent="|",t.setAttribute("style","animation:cursorAnimation "+e/100+"s infinite;"),document.getElementById(this.config.cursorId)&&document.getElementById(this.config.cursorId).remove(),document.getElementById(this.config.containerId).appendChild(t)},e.prototype.createTextContainer=function(){var e=document.createElement("span");e.id=this.config.textContainerId,document.getElementById(this.config.containerId).appendChild(e)},e.prototype.addText=function(e){var t=document.getElementById(this.config.textContainerId);t.textContent=""+t.textContent+e},e.prototype.deleteText=function(){document.getElementById(this.config.textContainerId).textContent=document.getElementById(this.config.textContainerId).textContent.slice(0,document.getElementById(this.config.textContainerId).textContent.length-1)},e.prototype.clear=function(){document.getElementById(this.config.cursorId)&&document.getElementById(this.config.cursorId).remove(),document.getElementById(this.config.textContainerId)&&document.getElementById(this.config.textContainerId).remove()},e.prototype.createContainer=function(){var e=document.createElement("div");e.id=this.config.containerId,"#"===this.config.parentId.charAt(0)?document.getElementById(this.config.parentId.slice(1,this.config.parentId.length)).appendChild(e):document.querySelector(this.config.parentId).appendChild(e),this.createTextContainer()},e}();t.default=i},"./src/ts/functions/random.ts":
/*!************************************!*\
    !*** ./src/ts/functions/random.ts ***!
    \************************************/
/*! no static exports found */
function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return Math.floor(Math.random()*t)+e}}})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vL3NyYy90cy9UeXBlSlMudHMiLCJ3ZWJwYWNrOi8vLy9zcmMvdHMvY2xhc3Nlcy9VSUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy9zcmMvdHMvZnVuY3Rpb25zL3JhbmRvbS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRoaXMiLCJzdGFydFBlcm1pc3Npb24iLCJ0eXBlSXQiLCJfdGhpcyIsInVpIiwiY3JlYXRlQ29udGFpbmVyIiwid2luZG93Iiwic2V0SW50ZXJ2YWwiLCJjb25maWciLCJjdXJzb3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImN1cnNvcklkIiwidGV4dENvbnRhaW5lciIsInRleHRDb250YWluZXJJZCIsImdldEVsZW1lbnRCeUlkIiwidGV4dENvbnRlbnQiLCJ0ZXh0IiwiY29udGFpbmVyIiwiY29udGFpbmVySWQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxH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QXpDLEVBQUEsVzs7Ozs7NkJDbk5BQSxFQUFBLGNBQ0EsaUJBQ0EsY0FDUWtDLEtBQUtRLE9BQVNBLEVBMEN0QixPQXhDQSxxQ0FDUSxJQUFJQyxFQUFTQyxTQUFTQyxjQUFjLFFBQ3BDRixFQUFPRyxHQUFLWixLQUFLUSxPQUFPSyxTQUNoQyxrQkFDQSx5RUFDQSwrQ0FDQSx1REFDQSxpRUFFQSwyQ0FDUSxJQUFJQyxFQUFnQkosU0FBU0MsY0FBYyxRQUMzQ0csRUFBY0YsR0FBS1osS0FBS1EsT0FBT08sZ0JBQ3ZDLGlFQUVBLGdDQUNRLElBQUlELEVBQWdCSixTQUFTTSxlQUFlaEIsS0FBS1EsT0FBT08saUJBQ3hERCxFQUFjRyxZQUFjLEdBQUtILEVBQWNHLFlBQWNDLEdBRXJFLGtDQUNRUixTQUFTTSxlQUFlaEIsS0FBS1EsT0FBT08saUJBQWlCRSxZQUFjUCxTQUMzRSw0Q0FDQSxxRkFDQSxXQUVBLDZCQUNRLFNBQVIsc0NBQ0EsdURBQ0Esc0RBQ0EsK0RBRUEsdUNBQ1EsSUFBSVMsRUFBWVQsU0FBU0MsY0FBYyxPQUN2Q1EsRUFBVVAsR0FBS1osS0FBS1EsT0FBT1ksWUFDbkMscUNBQ0EsU0FDQSwwRUFDQSxlQUNBLDREQUNBLDRCQUVBLEVBNUNBLEdBOENBdEQsRUFBQSxXOzs7Ozs2QkMvQ0FBLEVBQUEsY0FJQUEsRUFBaUIsUUFIakIsY0FDQSIsImZpbGUiOiJUeXBlSlMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy90cy9UeXBlSlMudHNcIik7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxudmFyIFVJQ29udHJvbGxlcl8xID0gcmVxdWlyZShcIi4vY2xhc3Nlcy9VSUNvbnRyb2xsZXJcIik7XHJcbnZhciByYW5kb21fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9ucy9yYW5kb21cIik7XHJcbnZhciBUeXBlSlMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUeXBlSlMocGFyZW50SWQsIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuc3RhcnRQZXJtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFkZFBlcm1pc3Npb25GID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kZWxldGVQZXJtaXNzaW9uID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hZGRQZXJtaXNzaW9uSW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLnBhcmVudElkID0gcGFyZW50SWQ7XHJcbiAgICAgICAgdGhpcy5hZGRUZXh0QXJyID0gdGhpcy5jb25maWcuYWRkICYmIHRoaXMuY29uZmlnLmFkZC50ZXh0LnNwbGl0KFwiXCIpO1xyXG4gICAgICAgIC8vIERlZmF1bHQgdmFsdWVzIGZvciB0aGUgdHdvIGNvbmZpZyB2YXJpYWJsZSBvYmplY3RzXHJcbiAgICAgICAgdGhpcy5jb25maWcuaW5pdC5kZWxheSA9ICF0aGlzLmNvbmZpZy5pbml0LmRlbGF5XHJcbiAgICAgICAgICAgID8gMVxyXG4gICAgICAgICAgICA6IHRoaXMuY29uZmlnLmluaXQuZGVsYXk7XHJcbiAgICAgICAgdGhpcy5jb25maWcuaW5pdC5kZWxheUJldHdlZW4gPSAhdGhpcy5jb25maWcuaW5pdC5kZWxheUJldHdlZW5cclxuICAgICAgICAgICAgPyA1MFxyXG4gICAgICAgICAgICA6IHRoaXMuY29uZmlnLmluaXQuZGVsYXlCZXR3ZWVuO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmN1cnNvclNwZWVkID0gIXRoaXMuY29uZmlnLmN1cnNvclNwZWVkXHJcbiAgICAgICAgICAgID8gNTBcclxuICAgICAgICAgICAgOiB0aGlzLmNvbmZpZy5jdXJzb3JTcGVlZDtcclxuICAgICAgICB0aGlzLmNvbmZpZy5jbGVhckRlbGF5ID0gIXRoaXMuY29uZmlnLmNsZWFyRGVsYXlcclxuICAgICAgICAgICAgPyAxXHJcbiAgICAgICAgICAgIDogdGhpcy5jb25maWcuY2xlYXJEZWxheTtcclxuICAgICAgICBpZiAodGhpcy5jb25maWdbXCJkZWxldGVcIl0pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXkgPSAhdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXlcclxuICAgICAgICAgICAgICAgID8gdGhpcy5jb25maWcuaW5pdC5kZWxheVxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheTtcclxuICAgICAgICAgICAgdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXlCZXR3ZWVuID0gIXRoaXMuY29uZmlnW1wiZGVsZXRlXCJdLmRlbGF5QmV0d2VlblxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmNvbmZpZy5pbml0LmRlbGF5QmV0d2VlblxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheUJldHdlZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hZGQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuYWRkLmRlbGF5ID0gIXRoaXMuY29uZmlnLmFkZC5kZWxheVxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmNvbmZpZy5pbml0LmRlbGF5XHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLmFkZC5kZWxheTtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuYWRkLmRlbGF5QmV0d2VlbiA9ICF0aGlzLmNvbmZpZy5hZGQuZGVsYXlCZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuY29uZmlnLmluaXQuZGVsYXlCZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLmFkZC5kZWxheUJldHdlZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHVzZSByYW5kb20gbnVtYmVycyB0byBhdm9pZCBkdXBsaWNhdGUgSURzXHJcbiAgICAgICAgdGhpcy51aUNvbmZpZyA9IHtcclxuICAgICAgICAgICAgcGFyZW50SWQ6IHRoaXMucGFyZW50SWQsXHJcbiAgICAgICAgICAgIGN1cnNvcklkOiBcIlwiICsgcmFuZG9tXzFbXCJkZWZhdWx0XCJdKDAsIDk5OTk5OTk5OTk5OTkpLFxyXG4gICAgICAgICAgICBjb250YWluZXJJZDogXCJcIiArIHJhbmRvbV8xW1wiZGVmYXVsdFwiXSgwLCA5OTk5OTk5OTk5OTk5KSxcclxuICAgICAgICAgICAgdGV4dENvbnRhaW5lcklkOiBcIlwiICsgcmFuZG9tXzFbXCJkZWZhdWx0XCJdKDAsIDk5OTk5OTk5OTk5OTkpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnVpID0gbmV3IFVJQ29udHJvbGxlcl8xW1wiZGVmYXVsdFwiXSh0aGlzLnVpQ29uZmlnKTtcclxuICAgIH1cclxuICAgIFR5cGVKUy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnR5cGVJdCgpO1xyXG4gICAgfTtcclxuICAgIFR5cGVKUy5wcm90b3R5cGUuaGFuZGxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy51aS5jcmVhdGVDb250YWluZXIoKTtcclxuICAgICAgICB0aGlzLnVpLmNyZWF0ZUN1cnNvcih0aGlzLmNvbmZpZy5jdXJzb3JTcGVlZCk7XHJcbiAgICAgICAgdGhpcy5pbml0VGV4dEFyciA9IHRoaXMuY29uZmlnLmluaXQudGV4dC5zcGxpdChcIlwiKTtcclxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnVpLmNyZWF0ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICBfdGhpcy51aS5jcmVhdGVDdXJzb3IoX3RoaXMuY29uZmlnLmN1cnNvclNwZWVkKTtcclxuICAgICAgICAgICAgX3RoaXMuaW5pdFRleHRBcnIuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5hZGRUZXh0KGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIGl0J3MgZW5kZWQgd3JpdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBfdGhpcy5jb25maWcuaW5pdC50ZXh0Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGlfMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5kZWxldGVUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaV8xID09PSBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uY291bnQgLSAxICYmIF90aGlzLmNvbmZpZy5hZGQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHRoZSBhZGR0ZXh0IG9wZXJhdGlvbiBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFBlcm1pc3Npb25GID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgaV8xICogX3RoaXMuY29uZmlnW1wiZGVsZXRlXCJdLmRlbGF5QmV0d2Vlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAwOyBpXzEgPCBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uY291bnQ7IGlfMSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEoaV8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHRoZSBhZGR0ZXh0IG9wZXJhdGlvbiBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5hZGQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkUGVybWlzc2lvbkYgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb25maWcuYWRkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBpdCBoYXMgcGVybWlzc2lvbiB0byBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYWRkUGVybWlzc2lvbkYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0aGUgaW50ZXJ2YWwgdG8gZ28gb24gZm9yZXZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRQZXJtaXNzaW9uRiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRUZXh0QXJyLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5hZGRUZXh0KGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBpICogX3RoaXMuY29uZmlnLmFkZC5kZWxheUJldHdlZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF90aGlzLmNvbmZpZy5hZGQuZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgaSAqIF90aGlzLmNvbmZpZy5pbml0LmRlbGF5QmV0d2Vlbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRoaXMuY29uZmlnLmluaXQuZGVsYXkpO1xyXG4gICAgfTtcclxuICAgIFR5cGVKUy5wcm90b3R5cGUuaGFuZGxlSW5maW5pdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc3RhcnRQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pbml0VGV4dEFyciA9IF90aGlzLmNvbmZpZy5pbml0LnRleHQuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRoaXMgdG8gcmVwZWF0IGZvcmV2ZXIgdW5sZXNzIGl0J3MgYmVjb21lIHRydWUgaW4gdGhlIHNldCB0aW1lb3V0XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFBlcm1pc3Npb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVpLmNyZWF0ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudWkuY3JlYXRlQ3Vyc29yKF90aGlzLmNvbmZpZy5jdXJzb3JTcGVlZCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdFRleHRBcnIuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuYWRkVGV4dChlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIGZpbmlzaGVkIHdyaXRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pbml0VGV4dEFyci5sZW5ndGggLSAxID09PSBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uIChpXzIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLmRlbGV0ZVRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlfMiA9PT0gX3RoaXMuY29uZmlnW1wiZGVsZXRlXCJdLmNvdW50IC0gMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnLmFkZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5jb25maWcuaW5maW5pdGUuZGVsZXRlSW5maW5pdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IF90aGlzLmNvbmZpZy5pbml0LnRleHQuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UodGVtcC5sZW5ndGggLSBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uY291bnQsIHRlbXAubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuaW5pdC50ZXh0ID0gdGVtcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvLC9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0VGV4dEFyciA9IF90aGlzLmNvbmZpZy5pbml0LnRleHQuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnW1wiZGVsZXRlXCJdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFBlcm1pc3Npb25JbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXlCZXR3ZWVuICogaV8yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpXzIgPSAwOyBpXzIgPCBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uY291bnQ7IGlfMisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3BfMihpXzIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5hZGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlbGV0ZVBlcm1pc3Npb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFBlcm1pc3Npb25JbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlUGVybWlzc2lvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb25maWcuYWRkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYWRkUGVybWlzc2lvbkluID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkUGVybWlzc2lvbkluID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRUZXh0QXJyLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuYWRkVGV4dChlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmFkZFRleHRBcnIubGVuZ3RoIC0gMSA9PT0gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmNvbmZpZy5pbmZpbml0ZS5hZGRJbmZpbml0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnLmluaXQudGV4dCA9IFwiXCIgKyBfdGhpcy5jb25maWcuaW5pdC50ZXh0ICsgX3RoaXMuY29uZmlnLmFkZC50ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5pdFRleHRBcnIgPSBfdGhpcy5jb25maWcuaW5pdC50ZXh0LnNwbGl0KFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uZmlnLmFkZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlUGVybWlzc2lvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgaSAqIF90aGlzLmNvbmZpZy5hZGQuZGVsYXlCZXR3ZWVuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX3RoaXMuY29uZmlnLmFkZC5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlUGVybWlzc2lvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsZWFyIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsZWFyXzEgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBkZWxldGluZyBvciBhZGRpbmcgdGV4dCBhbmQgb3IgaXQncyBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZGVsZXRlUGVybWlzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgZG9uJ3Qgd2VudCB0aGlzIG9wZXJhdGlvbiB0byBnbyBvbiBmb3JldmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWxldGVQZXJtaXNzaW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3cgcmVwZWF0IHRoZSBvcGVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFBlcm1pc3Npb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGNsZWFyXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX3RoaXMuY29uZmlnLmNsZWFyRGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGkgKiBfdGhpcy5jb25maWcuaW5pdC5kZWxheUJldHdlZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgX3RoaXMuY29uZmlnLmluaXQuZGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9O1xyXG4gICAgVHlwZUpTLnByb3RvdHlwZS50eXBlSXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmluZmluaXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlSW5maW5pdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBUeXBlSlM7XHJcbn0oKSk7XHJcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gVHlwZUpTO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxudmFyIFVJQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVJQ29udHJvbGxlcihjb25maWcpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgIH1cclxuICAgIFVJQ29udHJvbGxlci5wcm90b3R5cGUuY3JlYXRlQ3Vyc29yID0gZnVuY3Rpb24gKHNwZWVkKSB7XHJcbiAgICAgICAgdmFyIGN1cnNvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIGN1cnNvci5pZCA9IHRoaXMuY29uZmlnLmN1cnNvcklkO1xyXG4gICAgICAgIGN1cnNvci50ZXh0Q29udGVudCA9IFwifFwiO1xyXG4gICAgICAgIGN1cnNvci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImFuaW1hdGlvbjpjdXJzb3JBbmltYXRpb24gXCIgKyBzcGVlZCAvIDEwMCArIFwicyBpbmZpbml0ZTtcIik7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmN1cnNvcklkKSlcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuY3Vyc29ySWQpLnJlbW92ZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmNvbnRhaW5lcklkKS5hcHBlbmRDaGlsZChjdXJzb3IpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udHJvbGxlci5wcm90b3R5cGUuY3JlYXRlVGV4dENvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGV4dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRleHRDb250YWluZXIuaWQgPSB0aGlzLmNvbmZpZy50ZXh0Q29udGFpbmVySWQ7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuY29udGFpbmVySWQpLmFwcGVuZENoaWxkKHRleHRDb250YWluZXIpO1xyXG4gICAgfTtcclxuICAgIFVJQ29udHJvbGxlci5wcm90b3R5cGUuYWRkVGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdmFyIHRleHRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy50ZXh0Q29udGFpbmVySWQpO1xyXG4gICAgICAgIHRleHRDb250YWluZXIudGV4dENvbnRlbnQgPSBcIlwiICsgdGV4dENvbnRhaW5lci50ZXh0Q29udGVudCArIHRleHQ7XHJcbiAgICB9O1xyXG4gICAgVUlDb250cm9sbGVyLnByb3RvdHlwZS5kZWxldGVUZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLnRleHRDb250YWluZXJJZCkudGV4dENvbnRlbnQgPSBkb2N1bWVudFxyXG4gICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcudGV4dENvbnRhaW5lcklkKVxyXG4gICAgICAgICAgICAudGV4dENvbnRlbnQuc2xpY2UoMCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcudGV4dENvbnRhaW5lcklkKS50ZXh0Q29udGVudFxyXG4gICAgICAgICAgICAubGVuZ3RoIC0gMSk7XHJcbiAgICB9O1xyXG4gICAgVUlDb250cm9sbGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuY3Vyc29ySWQpKVxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5jdXJzb3JJZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLnRleHRDb250YWluZXJJZCkpXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLnRleHRDb250YWluZXJJZCkucmVtb3ZlKCk7XHJcbiAgICB9O1xyXG4gICAgVUlDb250cm9sbGVyLnByb3RvdHlwZS5jcmVhdGVDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgY29udGFpbmVyLmlkID0gdGhpcy5jb25maWcuY29udGFpbmVySWQ7XHJcbiAgICAgICAgdGhpcy5jb25maWcucGFyZW50SWQuY2hhckF0KDApID09PSBcIiNcIlxyXG4gICAgICAgICAgICA/IGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcucGFyZW50SWQuc2xpY2UoMSwgdGhpcy5jb25maWcucGFyZW50SWQubGVuZ3RoKSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmRDaGlsZChjb250YWluZXIpXHJcbiAgICAgICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmNvbmZpZy5wYXJlbnRJZCkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHRDb250YWluZXIoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVUlDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IFVJQ29udHJvbGxlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XHJcbmZ1bmN0aW9uIHJhbmRvbShmcm9tLCB0bykge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRvKSArIGZyb207XHJcbn1cclxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSByYW5kb207XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=