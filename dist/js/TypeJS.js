!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"===i(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./src/ts/TypeJS.ts")}({"./node_modules/css-loader/dist/cjs.js!./src/css/main.css":
/*!****************************************************************!*\
    !*** ./node_modules/css-loader/dist/cjs.js!./src/css/main.css ***!
    \****************************************************************/
/*! no static exports found */
function(e,t,n){(t=n(
/*! ../../node_modules/css-loader/dist/runtime/api.js */
"./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.i,"@keyframes cursorAnimation {\n  0% {\n    opacity: 0; }\n  49% {\n    opacity: 0; }\n  50% {\n    opacity: 1; } }\n",""]),e.exports=t},"./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
    !*** ./node_modules/css-loader/dist/runtime/api.js ***!
    \*****************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function i(e,t){var n,i,o,r=e[1]||"",c=e[3];if(!c)return r;if(t&&"function"==typeof btoa){var s=(n=c,i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(o," */")),d=c.sources.map((function(e){return"/*# sourceURL=".concat(c.sourceRoot||"").concat(e," */")}));return[r].concat(d).concat([s]).join("\n")}return[r].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=i(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(o[c]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);i&&o[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),t.push(d))}},t}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
    !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
    \****************************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function i(e){for(var t=-1,n=0;n<g.length;n++)if(g[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},o=[],r=0;r<e.length;r++){var c=e[r],s=t.base?c[0]+t.base:c[0],a=n[s]||0,u="".concat(s," ").concat(a);n[s]=a+1;var f=i(u),l={css:c[1],media:c[2],sourceMap:c[3]};-1===f?g.push({identifier:u,updater:d(l,t),references:1}):(g[f].references++,g[f].updater(l)),o.push(u)}return o}function r(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=l(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}function c(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=p(t,o);else{var r=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(r,c[t]):e.appendChild(r)}}function s(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function d(e,t){var n,i,o;if(t.singleton){var d=h++;n=m||(m=r(t)),i=c.bind(null,n,d,!1),o=c.bind(null,n,d,!0)}else n=r(t),i=s.bind(null,n,t),o=function(){!function(e){null!==e.parentNode&&e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}var a,u,f=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},l=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),g=[],p=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")}),m=null,h=0;e.exports=function(e,t){!(t=t||{}).singleton&&"boolean"!=typeof t.singleton&&(t.singleton=f());var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var c=i(n[r]);g[c].references--}for(var s=o(e,t),d=0;d<n.length;d++){var a=i(n[d]);0===g[a].references&&(g[a].updater(),g.splice(a,1))}n=s}}}},"./src/css/main.css":
/*!**************************!*\
    !*** ./src/css/main.css ***!
    \**************************/
/*! no static exports found */
function(e,t,n){var i=n(
/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */
"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=n(
/*! !../../node_modules/css-loader/dist/cjs.js!./main.css */
"./node_modules/css-loader/dist/cjs.js!./src/css/main.css");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1},c=(i(o,r),o.locals?o.locals:{});e.exports=c},"./src/ts/TypeJS.ts":
/*!**************************!*\
    !*** ./src/ts/TypeJS.ts ***!
    \**************************/
/*! no static exports found */
function(e,t,n){"use strict";t.__esModule=!0;var i=n(
/*! ./classes/UIController */
"./src/ts/classes/UIController.ts"),o=n(
/*! ./functions/random */
"./src/ts/functions/random.ts");n(
/*! ./../css/main.css */
"./src/css/main.css");var r=function(){function e(e,t){this.startPermission=!0,this.addPermissionF=!1,this.deletePermission=!1,this.addPermissionIn=!1,this.config=t,this.parentId=e,this.addTextArr=this.config.add&&this.config.add.text.split(""),this.config.init.delay=this.config.init.delay?this.config.init.delay:1,this.config.init.delayBetween=this.config.init.delayBetween?this.config.init.delayBetween:50,this.config.cursorSpeed=this.config.cursorSpeed?this.config.cursorSpeed:50,this.config.clearDelay=this.config.clearDelay?this.config.clearDelay:1,this.config.delete&&(this.config.delete.delay=this.config.delete.delay?this.config.delete.delay:this.config.init.delay,this.config.delete.delayBetween=this.config.delete.delayBetween?this.config.delete.delayBetween:this.config.init.delayBetween),this.config.add&&(this.config.add.delay=this.config.add.delay?this.config.add.delay:this.config.init.delay,this.config.add.delayBetween=this.config.add.delayBetween?this.config.add.delayBetween:this.config.init.delayBetween),this.uiConfig={parentId:this.parentId,cursorId:""+o.default(0,9999999999999),containerId:""+o.default(0,9999999999999),textContainerId:""+o.default(0,9999999999999)},this.ui=new i.default(this.uiConfig)}return e.prototype.init=function(){this.typeIt()},e.prototype.handle=function(){var e=this;this.ui.createContainer(),this.ui.createCursor(this.config.cursorSpeed),this.initTextArr=this.config.init.text.split(""),window.setTimeout((function(){e.ui.createContainer(),e.ui.createCursor(e.config.cursorSpeed),e.initTextArr.forEach((function(t,n){window.setTimeout((function(){e.ui.addText(t),n===e.config.init.text.length-1&&(e.config.delete?window.setTimeout((function(){for(var t=function(t){window.setTimeout((function(){e.ui.deleteText(),t===e.config.delete.count-1&&e.config.add&&(e.addPermissionF=!0)}),t*e.config.delete.delayBetween)},n=0;n<e.config.delete.count;n++)t(n)}),e.config.delete.delay):e.config.add&&(e.addPermissionF=!0),e.config.add&&window.setInterval((function(){e.addPermissionF&&(e.addPermissionF=!1,window.setTimeout((function(){e.addTextArr.forEach((function(t,n){window.setTimeout((function(){e.ui.addText(t)}),n*e.config.add.delayBetween)}))}),e.config.add.delay))}),0))}),n*e.config.init.delayBetween)}))}),this.config.init.delay)},e.prototype.handleInfinite=function(){var e=this;window.setInterval((function(){e.startPermission&&(e.initTextArr=e.config.init.text.split(""),e.startPermission=!1,e.ui.createContainer(),e.ui.createCursor(e.config.cursorSpeed),window.setTimeout((function(){e.initTextArr.forEach((function(t,n){window.setTimeout((function(){if(e.ui.addText(t),e.initTextArr.length-1===n){e.config.delete?window.setTimeout((function(){for(var t=function(t){window.setTimeout((function(){if(e.ui.deleteText(),t===e.config.delete.count-1&&e.config.add){if(!e.config.infinite.deleteInfinite){var n=e.config.init.text.split("");n.splice(n.length-e.config.delete.count,n.length),e.config.init.text=n.toString().replace(/,/g,""),e.initTextArr=e.config.init.text.split(""),e.config.delete=null}e.addPermissionIn=!0}}),e.config.delete.delayBetween*t)},n=0;n<e.config.delete.count;n++)t(n)}),e.config.delete.delay):e.config.add?(e.deletePermission=!1,e.addPermissionIn=!0):e.deletePermission=!0,e.config.add?window.setInterval((function(){!0===e.addPermissionIn&&(e.addPermissionIn=!1,window.setTimeout((function(){e.addTextArr.forEach((function(t,n){window.setTimeout((function(){e.ui.addText(t),e.addTextArr.length-1===n&&(!e.config.infinite.addInfinite&&(e.config.init.text=""+e.config.init.text+e.config.add.text,e.initTextArr=e.config.init.text.split(""),e.config.add=null),e.deletePermission=!0)}),n*e.config.add.delayBetween)}))}),e.config.add.delay))}),0):e.deletePermission=!0;var i=window.setInterval((function(){e.deletePermission&&(e.deletePermission=!1,window.setTimeout((function(){e.ui.clear(),e.startPermission=!0,window.clearInterval(i)}),e.config.clearDelay))}),0)}}),n*e.config.init.delayBetween)}))}),e.config.init.delay))}),0)},e.prototype.typeIt=function(){this.config.infinite?this.handleInfinite():this.handle()},e}();t.default=r},"./src/ts/classes/UIController.ts":
/*!****************************************!*\
    !*** ./src/ts/classes/UIController.ts ***!
    \****************************************/
/*! no static exports found */
function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e){this.config=e}return e.prototype.createCursor=function(e){var t=document.createElement("span");t.id=this.config.cursorId,t.textContent="|",t.setAttribute("style","animation:cursorAnimation "+e/100+"s infinite;"),document.getElementById(this.config.cursorId)&&document.getElementById(this.config.cursorId).remove(),document.getElementById(this.config.containerId).appendChild(t)},e.prototype.createTextContainer=function(){var e=document.createElement("span");e.id=this.config.textContainerId,document.getElementById(this.config.containerId).appendChild(e)},e.prototype.addText=function(e){var t=document.getElementById(this.config.textContainerId);t.textContent=""+t.textContent+e},e.prototype.deleteText=function(){document.getElementById(this.config.textContainerId).textContent=document.getElementById(this.config.textContainerId).textContent.slice(0,document.getElementById(this.config.textContainerId).textContent.length-1)},e.prototype.clear=function(){document.getElementById(this.config.cursorId)&&document.getElementById(this.config.cursorId).remove(),document.getElementById(this.config.textContainerId)&&document.getElementById(this.config.textContainerId).remove()},e.prototype.createContainer=function(){var e=document.createElement("div");e.id=this.config.containerId,"#"===this.config.parentId.charAt(0)?document.getElementById(this.config.parentId.slice(1,this.config.parentId.length)).appendChild(e):document.querySelector(this.config.parentId).appendChild(e),this.createTextContainer()},e}();t.default=i},"./src/ts/functions/random.ts":
/*!************************************!*\
    !*** ./src/ts/functions/random.ts ***!
    \************************************/
/*! no static exports found */
function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return Math.floor(Math.random()*t)+e}}})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vL3NyYy9jc3MvbWFpbi5jc3MiLCJ3ZWJwYWNrOi8vLy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovLy8vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8vc3JjL2Nzcy9tYWluLmNzcz80OWEzIiwid2VicGFjazovLy8vc3JjL3RzL1R5cGVKUy50cyIsIndlYnBhY2s6Ly8vL3NyYy90cy9jbGFzc2VzL1VJQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vL3NyYy90cy9mdW5jdGlvbnMvcmFuZG9tLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicHVzaCIsImJhc2U2NCIsInRoaXMiLCJzdGFydFBlcm1pc3Npb24iLCJ0eXBlSXQiLCJfdGhpcyIsInVpIiwiY3JlYXRlQ29udGFpbmVyIiwid2luZG93Iiwic2V0SW50ZXJ2YWwiLCJjb25maWciLCJjdXJzb3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImN1cnNvcklkIiwidGV4dENvbnRhaW5lciIsInRleHRDb250YWluZXJJZCIsImdldEVsZW1lbnRCeUlkIiwidGV4dENvbnRlbnQiLCJ0ZXh0IiwiY29udGFpbmVyIiwiY29udGFpbmVySWQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFB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QUFTQSxFQTBDdEIsT0F4Q0EscUNBQ1EsSUFBSUMsRUFBU0MsU0FBU0MsY0FBYyxRQUNwQ0YsRUFBT0csR0FBS1osS0FBS1EsT0FBT0ssU0FDaEMsa0JBQ0EseUVBQ0EsK0NBQ0EsdURBQ0EsaUVBRUEsMkNBQ1EsSUFBSUMsRUFBZ0JKLFNBQVNDLGNBQWMsUUFDM0NHLEVBQWNGLEdBQUtaLEtBQUtRLE9BQU9PLGdCQUN2QyxpRUFFQSxnQ0FDUSxJQUFJRCxFQUFnQkosU0FBU00sZUFBZWhCLEtBQUtRLE9BQU9PLGlCQUN4REQsRUFBY0csWUFBYyxHQUFLSCxFQUFjRyxZQUFjQyxHQUVyRSxrQ0FDUVIsU0FBU00sZUFBZWhCLEtBQUtRLE9BQU9PLGlCQUFpQkUsWUFBY1AsU0FDM0UsNENBQ0EscUZBQ0EsV0FFQSw2QkFDUSxTQUFSLHNDQUNBLHVEQUNBLHNEQUNBLCtEQUVBLHVDQUNRLElBQUlTLEVBQVlULFNBQVNDLGNBQWMsT0FDdkNRLEVBQVVQLEdBQUtaLEtBQUtRLE9BQU9ZLFlBQ25DLHFDQUNBLFNBQ0EsMEVBQ0EsZUFDQSw0REFDQSw0QkFFQSxFQTVDQSxHQThDQXhELEVBQUEsVzs7Ozs7NkJDL0NBQSxFQUFBLGNBSUFBLEVBQWlCLFFBSGpCLGNBQ0EiLCJmaWxlIjoiVHlwZUpTLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvdHMvVHlwZUpTLnRzXCIpO1xuIiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBrZXlmcmFtZXMgY3Vyc29yQW5pbWF0aW9uIHtcXG4gIDAlIHtcXG4gICAgb3BhY2l0eTogMDsgfVxcbiAgNDklIHtcXG4gICAgb3BhY2l0eTogMDsgfVxcbiAgNTAlIHtcXG4gICAgb3BhY2l0eTogMTsgfSB9XFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9tYWluLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxudmFyIFVJQ29udHJvbGxlcl8xID0gcmVxdWlyZShcIi4vY2xhc3Nlcy9VSUNvbnRyb2xsZXJcIik7XHJcbnZhciByYW5kb21fMSA9IHJlcXVpcmUoXCIuL2Z1bmN0aW9ucy9yYW5kb21cIik7XHJcbnJlcXVpcmUoXCIuLy4uL2Nzcy9tYWluLmNzc1wiKTtcclxudmFyIFR5cGVKUyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFR5cGVKUyhwYXJlbnRJZCwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydFBlcm1pc3Npb24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWRkUGVybWlzc2lvbkYgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRlbGV0ZVBlcm1pc3Npb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFkZFBlcm1pc3Npb25JbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMucGFyZW50SWQgPSBwYXJlbnRJZDtcclxuICAgICAgICB0aGlzLmFkZFRleHRBcnIgPSB0aGlzLmNvbmZpZy5hZGQgJiYgdGhpcy5jb25maWcuYWRkLnRleHQuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgLy8gRGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSB0d28gY29uZmlnIHZhcmlhYmxlIG9iamVjdHNcclxuICAgICAgICB0aGlzLmNvbmZpZy5pbml0LmRlbGF5ID0gIXRoaXMuY29uZmlnLmluaXQuZGVsYXlcclxuICAgICAgICAgICAgPyAxXHJcbiAgICAgICAgICAgIDogdGhpcy5jb25maWcuaW5pdC5kZWxheTtcclxuICAgICAgICB0aGlzLmNvbmZpZy5pbml0LmRlbGF5QmV0d2VlbiA9ICF0aGlzLmNvbmZpZy5pbml0LmRlbGF5QmV0d2VlblxyXG4gICAgICAgICAgICA/IDUwXHJcbiAgICAgICAgICAgIDogdGhpcy5jb25maWcuaW5pdC5kZWxheUJldHdlZW47XHJcbiAgICAgICAgdGhpcy5jb25maWcuY3Vyc29yU3BlZWQgPSAhdGhpcy5jb25maWcuY3Vyc29yU3BlZWRcclxuICAgICAgICAgICAgPyA1MFxyXG4gICAgICAgICAgICA6IHRoaXMuY29uZmlnLmN1cnNvclNwZWVkO1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmNsZWFyRGVsYXkgPSAhdGhpcy5jb25maWcuY2xlYXJEZWxheVxyXG4gICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgOiB0aGlzLmNvbmZpZy5jbGVhckRlbGF5O1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheSA9ICF0aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheVxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmNvbmZpZy5pbml0LmRlbGF5XHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnW1wiZGVsZXRlXCJdLmRlbGF5O1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheUJldHdlZW4gPSAhdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXlCZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuY29uZmlnLmluaXQuZGVsYXlCZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnW1wiZGVsZXRlXCJdLmRlbGF5QmV0d2VlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFkZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hZGQuZGVsYXkgPSAhdGhpcy5jb25maWcuYWRkLmRlbGF5XHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuY29uZmlnLmluaXQuZGVsYXlcclxuICAgICAgICAgICAgICAgIDogdGhpcy5jb25maWcuYWRkLmRlbGF5O1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5hZGQuZGVsYXlCZXR3ZWVuID0gIXRoaXMuY29uZmlnLmFkZC5kZWxheUJldHdlZW5cclxuICAgICAgICAgICAgICAgID8gdGhpcy5jb25maWcuaW5pdC5kZWxheUJldHdlZW5cclxuICAgICAgICAgICAgICAgIDogdGhpcy5jb25maWcuYWRkLmRlbGF5QmV0d2VlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdXNlIHJhbmRvbSBudW1iZXJzIHRvIGF2b2lkIGR1cGxpY2F0ZSBJRHNcclxuICAgICAgICB0aGlzLnVpQ29uZmlnID0ge1xyXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCxcclxuICAgICAgICAgICAgY3Vyc29ySWQ6IFwiXCIgKyByYW5kb21fMVtcImRlZmF1bHRcIl0oMCwgOTk5OTk5OTk5OTk5OSksXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcklkOiBcIlwiICsgcmFuZG9tXzFbXCJkZWZhdWx0XCJdKDAsIDk5OTk5OTk5OTk5OTkpLFxyXG4gICAgICAgICAgICB0ZXh0Q29udGFpbmVySWQ6IFwiXCIgKyByYW5kb21fMVtcImRlZmF1bHRcIl0oMCwgOTk5OTk5OTk5OTk5OSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudWkgPSBuZXcgVUlDb250cm9sbGVyXzFbXCJkZWZhdWx0XCJdKHRoaXMudWlDb25maWcpO1xyXG4gICAgfVxyXG4gICAgVHlwZUpTLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudHlwZUl0KCk7XHJcbiAgICB9O1xyXG4gICAgVHlwZUpTLnByb3RvdHlwZS5oYW5kbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnVpLmNyZWF0ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgIHRoaXMudWkuY3JlYXRlQ3Vyc29yKHRoaXMuY29uZmlnLmN1cnNvclNwZWVkKTtcclxuICAgICAgICB0aGlzLmluaXRUZXh0QXJyID0gdGhpcy5jb25maWcuaW5pdC50ZXh0LnNwbGl0KFwiXCIpO1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudWkuY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnVpLmNyZWF0ZUN1cnNvcihfdGhpcy5jb25maWcuY3Vyc29yU3BlZWQpO1xyXG4gICAgICAgICAgICBfdGhpcy5pbml0VGV4dEFyci5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLmFkZFRleHQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gaXQncyBlbmRlZCB3cml0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IF90aGlzLmNvbmZpZy5pbml0LnRleHQubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnW1wiZGVsZXRlXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaV8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLmRlbGV0ZVRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpXzEgPT09IF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5jb3VudCAtIDEgJiYgX3RoaXMuY29uZmlnLmFkZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgdGhlIGFkZHRleHQgb3BlcmF0aW9uIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkUGVybWlzc2lvbkYgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBpXzEgKiBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uZGVsYXlCZXR3ZWVuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDA7IGlfMSA8IF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5jb3VudDsgaV8xKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShpXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgdGhlIGFkZHRleHQgb3BlcmF0aW9uIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLmFkZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRQZXJtaXNzaW9uRiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5hZGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGl0IGhhcyBwZXJtaXNzaW9uIHRvIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hZGRQZXJtaXNzaW9uRikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRoZSBpbnRlcnZhbCB0byBnbyBvbiBmb3JldmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFBlcm1pc3Npb25GID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFRleHRBcnIuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLmFkZFRleHQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGkgKiBfdGhpcy5jb25maWcuYWRkLmRlbGF5QmV0d2Vlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX3RoaXMuY29uZmlnLmFkZC5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBpICogX3RoaXMuY29uZmlnLmluaXQuZGVsYXlCZXR3ZWVuKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgdGhpcy5jb25maWcuaW5pdC5kZWxheSk7XHJcbiAgICB9O1xyXG4gICAgVHlwZUpTLnByb3RvdHlwZS5oYW5kbGVJbmZpbml0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5zdGFydFBlcm1pc3Npb24pIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmluaXRUZXh0QXJyID0gX3RoaXMuY29uZmlnLmluaXQudGV4dC5zcGxpdChcIlwiKTtcclxuICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdGhpcyB0byByZXBlYXQgZm9yZXZlciB1bmxlc3MgaXQncyBiZWNvbWUgdHJ1ZSBpbiB0aGUgc2V0IHRpbWVvdXRcclxuICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0UGVybWlzc2lvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudWkuY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5jcmVhdGVDdXJzb3IoX3RoaXMuY29uZmlnLmN1cnNvclNwZWVkKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0VGV4dEFyci5mb3JFYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5hZGRUZXh0KGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgZmluaXNoZWQgd3JpdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmluaXRUZXh0QXJyLmxlbmd0aCAtIDEgPT09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnW1wiZGVsZXRlXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKGlfMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuZGVsZXRlVGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaV8yID09PSBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0uY291bnQgLSAxICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuYWRkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmNvbmZpZy5pbmZpbml0ZS5kZWxldGVJbmZpbml0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gX3RoaXMuY29uZmlnLmluaXQudGV4dC5zcGxpdChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZSh0ZW1wLmxlbmd0aCAtIF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5jb3VudCwgdGVtcC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbmZpZy5pbml0LnRleHQgPSB0ZW1wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8sL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmluaXRUZXh0QXJyID0gX3RoaXMuY29uZmlnLmluaXQudGV4dC5zcGxpdChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWdbXCJkZWxldGVcIl0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkUGVybWlzc2lvbkluID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheUJldHdlZW4gKiBpXzIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMiA9IDA7IGlfMiA8IF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5jb3VudDsgaV8yKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8yKGlfMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF90aGlzLmNvbmZpZ1tcImRlbGV0ZVwiXS5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLmFkZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlUGVybWlzc2lvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkUGVybWlzc2lvbkluID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWxldGVQZXJtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy5hZGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hZGRQZXJtaXNzaW9uSW4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRQZXJtaXNzaW9uSW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFRleHRBcnIuZm9yRWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5hZGRUZXh0KGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYWRkVGV4dEFyci5sZW5ndGggLSAxID09PSBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuY29uZmlnLmluZmluaXRlLmFkZEluZmluaXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuaW5pdC50ZXh0ID0gXCJcIiArIF90aGlzLmNvbmZpZy5pbml0LnRleHQgKyBfdGhpcy5jb25maWcuYWRkLnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0VGV4dEFyciA9IF90aGlzLmNvbmZpZy5pbml0LnRleHQuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25maWcuYWRkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWxldGVQZXJtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBpICogX3RoaXMuY29uZmlnLmFkZC5kZWxheUJldHdlZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfdGhpcy5jb25maWcuYWRkLmRlbGF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWxldGVQZXJtaXNzaW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXIgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xlYXJfMSA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGRlbGV0aW5nIG9yIGFkZGluZyB0ZXh0IGFuZCBvciBpdCdzIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5kZWxldGVQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCB3ZW50IHRoaXMgb3BlcmF0aW9uIHRvIGdvIG9uIGZvcmV2ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlbGV0ZVBlcm1pc3Npb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdyByZXBlYXQgdGhlIG9wZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0UGVybWlzc2lvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoY2xlYXJfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfdGhpcy5jb25maWcuY2xlYXJEZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgaSAqIF90aGlzLmNvbmZpZy5pbml0LmRlbGF5QmV0d2Vlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCBfdGhpcy5jb25maWcuaW5pdC5kZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAwKTtcclxuICAgIH07XHJcbiAgICBUeXBlSlMucHJvdG90eXBlLnR5cGVJdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuaW5maW5pdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbmZpbml0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFR5cGVKUztcclxufSgpKTtcclxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBUeXBlSlM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xyXG52YXIgVUlDb250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVUlDb250cm9sbGVyKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgfVxyXG4gICAgVUlDb250cm9sbGVyLnByb3RvdHlwZS5jcmVhdGVDdXJzb3IgPSBmdW5jdGlvbiAoc3BlZWQpIHtcclxuICAgICAgICB2YXIgY3Vyc29yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgY3Vyc29yLmlkID0gdGhpcy5jb25maWcuY3Vyc29ySWQ7XHJcbiAgICAgICAgY3Vyc29yLnRleHRDb250ZW50ID0gXCJ8XCI7XHJcbiAgICAgICAgY3Vyc29yLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYW5pbWF0aW9uOmN1cnNvckFuaW1hdGlvbiBcIiArIHNwZWVkIC8gMTAwICsgXCJzIGluZmluaXRlO1wiKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuY3Vyc29ySWQpKVxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5jdXJzb3JJZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuY29udGFpbmVySWQpLmFwcGVuZENoaWxkKGN1cnNvcik7XHJcbiAgICB9O1xyXG4gICAgVUlDb250cm9sbGVyLnByb3RvdHlwZS5jcmVhdGVUZXh0Q29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZXh0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGV4dENvbnRhaW5lci5pZCA9IHRoaXMuY29uZmlnLnRleHRDb250YWluZXJJZDtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5jb250YWluZXJJZCkuYXBwZW5kQ2hpbGQodGV4dENvbnRhaW5lcik7XHJcbiAgICB9O1xyXG4gICAgVUlDb250cm9sbGVyLnByb3RvdHlwZS5hZGRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB2YXIgdGV4dENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLnRleHRDb250YWluZXJJZCk7XHJcbiAgICAgICAgdGV4dENvbnRhaW5lci50ZXh0Q29udGVudCA9IFwiXCIgKyB0ZXh0Q29udGFpbmVyLnRleHRDb250ZW50ICsgdGV4dDtcclxuICAgIH07XHJcbiAgICBVSUNvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZVRleHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcudGV4dENvbnRhaW5lcklkKS50ZXh0Q29udGVudCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy50ZXh0Q29udGFpbmVySWQpXHJcbiAgICAgICAgICAgIC50ZXh0Q29udGVudC5zbGljZSgwLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy50ZXh0Q29udGFpbmVySWQpLnRleHRDb250ZW50XHJcbiAgICAgICAgICAgIC5sZW5ndGggLSAxKTtcclxuICAgIH07XHJcbiAgICBVSUNvbnRyb2xsZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5jdXJzb3JJZCkpXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmN1cnNvcklkKS5yZW1vdmUoKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcudGV4dENvbnRhaW5lcklkKSlcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcudGV4dENvbnRhaW5lcklkKS5yZW1vdmUoKTtcclxuICAgIH07XHJcbiAgICBVSUNvbnRyb2xsZXIucHJvdG90eXBlLmNyZWF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjb250YWluZXIuaWQgPSB0aGlzLmNvbmZpZy5jb250YWluZXJJZDtcclxuICAgICAgICB0aGlzLmNvbmZpZy5wYXJlbnRJZC5jaGFyQXQoMCkgPT09IFwiI1wiXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5wYXJlbnRJZC5zbGljZSgxLCB0aGlzLmNvbmZpZy5wYXJlbnRJZC5sZW5ndGgpKVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZENoaWxkKGNvbnRhaW5lcilcclxuICAgICAgICAgICAgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY29uZmlnLnBhcmVudElkKS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dENvbnRhaW5lcigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBVSUNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gVUlDb250cm9sbGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxuZnVuY3Rpb24gcmFuZG9tKGZyb20sIHRvKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdG8pICsgZnJvbTtcclxufVxyXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHJhbmRvbTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==